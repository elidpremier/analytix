% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/dichotomize.R
\name{collapse_categories}
\alias{collapse_categories}
\title{Regroupement de catégories d'une variable factor/catégorielle}
\usage{
collapse_categories(
  data,
  var,
  groups,
  keep_na = TRUE,
  as_factor = TRUE,
  other_label = NULL
)
}
\arguments{
\item{data}{Un data.frame ou tibble contenant la variable à transformer.}

\item{var}{La variable à regrouper (non quote, ex: Species).}

\item{groups}{Liste nommée où chaque nom est le \strong{nouveau nom de catégorie}
et chaque élément est un vecteur des anciennes modalités à regrouper.}

\item{keep_na}{Logique, si FALSE les NA seront remplacés par \code{other_label}.}

\item{as_factor}{Logique, si TRUE la variable retournée sera un factor.}

\item{other_label}{Caractère, label pour les modalités non listées dans \code{groups}.
Si NULL, elles sont conservées inchangées.}
}
\value{
Un tibble avec la variable regroupée.
}
\description{
Transforme une variable catégorielle en regroupant certaines de ses modalités
sous de nouvelles catégories, selon une liste de regroupements fournie.
La fonction convertit automatiquement les facteurs en caractères avant regroupement,
puis reconvertit en factor si \code{as_factor = TRUE}.
}
\examples{
# Exemple 1 : regrouper certaines espèces d'iris
collapse_categories(
  iris,
  Species,
  groups = list(SetosaVersicolor = c("setosa", "versicolor"))
)

# Exemple 2 : regrouper cyl dans mtcars
collapse_categories(
  mtcars,
  cyl,
  groups = list(
    Petit = c(4, 6),
    Gros = 8
  ),
  other_label = "Autre",
  as_factor = TRUE
)

# Exemple 3 : avec NA dans diamonds
library(ggplot2)
df <- diamonds
df$clarity[sample(1:nrow(df), 20)] <- NA
collapse_categories(
  df,
  clarity,
  groups = list(
    Bon = c("SI1", "SI2"),
    Excellent = c("IF", "VVS1")
  ),
  keep_na = FALSE,
  other_label = "Autre"
)

}
